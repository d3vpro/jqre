import{JNode,JMain}from"./jqre.js";JNode.prototype.children=function(e=null){const o=new JNode;for(const e of this)o.add(e.children);return e?o.filter(e):o},JNode.prototype.closest=function(e,o=null){const t=new JNode;for(const n of this){const r=n.closest(e);r&&(null===o||o.contains(r))&&t.add(r)}return t},JNode.prototype.parent=function(e=null){const o=new JNode;for(const t of this){const n=t.parentNode;null!==e?n.matches(e)&&o.add(n):o.add(n)}return o.unique()},JNode.prototype.unique=function(){const e=(new JNode).add(this);for(const[o,t]of e.entries())for(const[n,r]of e.entries())t===r&&o!==n&&e.splice(n,1);return e},JNode.prototype.next=function(e=null){const o=new JNode;for(const e of this)o.add(e.nextElementSibling);return null!==e?o.filter(e):o},JNode.prototype.prev=function(e=null){const o=new JNode;for(const e of this)o.add(e.previousElementSibling);return null!==e?o.filter(e):o},JNode.prototype.first=function(){return this.length?(new JNode).add(Array.from(this).shift()):new JNode},JNode.prototype.last=function(){return this.length>0?(new JNode).add(Array.from(this).pop()):new JNode},JNode.prototype.find=function(e,o=null){for(const t of this){if(null===o)return(new JNode).add(t.querySelectorAll(JMain._internal.fixSelector(e)));if("boolean"==typeof o&&o)return(new JNode).add(t.querySelector(JMain._internal.fixSelector(e)));if(o instanceof Node||o instanceof JNode)return(new JNode).add(t.querySelectorAll(JMain._internal.fixSelector(e))).filter(o)}return new JNode},JNode.prototype.filter=function(e){const o=new JNode;if(!e)return o;for(const[t,n]of this.entries())switch(typeof e){case"string":n.matches(e)&&o.add(n);break;case"function":e.call(n,t)&&o.add(n);break;default:if(e instanceof NodeList||e instanceof HTMLCollection||e instanceof JNode)for(const t of Array.from(e))n===t&&o.add(n);else e instanceof Node&&n===e&&o.add(n)}return o},JNode.prototype.even=function(){return(new JNode).add(this.filter((e=>e%2==0)))},JNode.prototype.odd=function(){return(new JNode).add(this.filter((e=>e%2==1)))},JNode.prototype.has=function(e){const o=new JNode;for(const t of this)"string"==typeof e?t.querySelector(JMain._internal.fixSelector(e))&&o.add(t):t.contains(e)&&o.add(t);return o},JNode.prototype.is=function(e){if("function"==typeof e){for(const[o,t]of this.entries())if(e.call(t,o,t))return!0}else for(const o of this)for(const t of(new JNode).add(e))if(o===t)return!0;return!1},JNode.prototype.not=function(e){const o=new JNode;for(const[t,n]of this.entries()){if("function"==typeof e){if(e.call(n,t,n))continue}else if(e instanceof NodeList||e instanceof HTMLCollection||e instanceof JNode){let o=!1;for(const t of Array.from(e))if(n===t){o=!0;break}if(o)continue}else if(e instanceof Node){if(n===e)continue}else if(n.matches(e))continue;o.add(n)}return o},JNode.prototype.index=function(e=null){if(0===this.length)return-1;let o;return null===e?(o=this.first(),o.parent().children().indexOf(o[0])):(o="string"==typeof e?this.filter(e):(new JNode).add(e),o.length?this.indexOf(o[0]):-1)};